
TESTS <- [
{
name="JAPAN",
//ユーザー別サイト
//str = L"\u30E6\u30FC\u30B6\u30FC\u5225\u30B5\u30A4\u30C8"; // JAPAN 
// Little endian UTF-16/UCS-2: e6 30 fc 30 b6 30 fc 30 25 52 b5 30 a4 30 c8 30 00 00
// Hex of UTF-8: e3 83 a6 e3 83 bc e3 82 b6 e3 83 bc e5 88 a5 e3 82 b5 e3 82 a4 e3 83 88 00 
UTF16=[0xe6, 0x30, 0xfc, 0x30, 0xb6, 0x30, 0xfc, 0x30, 0x25, 0x52, 0xb5, 0x30, 0xa4, 0x30, 0xc8, 0x30],
UTF8=[0xe3, 0x83, 0xa6, 0xe3, 0x83, 0xbc, 0xe3, 0x82, 0xb6, 0xe3, 0x83, 0xbc, 0xe5, 0x88, 0xa5, 0xe3, 0x82, 0xb5, 0xe3, 0x82, 0xa4, 0xe3, 0x83, 0x88],
},{
name="CHINA",
//简体中文
//str = L"\u7B80\u4F53\u4E2D\u6587"; // CHINA 
// Little endian UTF-16/UCS-2: 80 7b 53 4f 2d 4e 87 65 00 00
// Hex of UTF-8: e7 ae 80 e4 bd 93 e4 b8 ad e6 96 87 00
UTF16=[0x80, 0x7b, 0x53, 0x4f, 0x2d, 0x4e, 0x87, 0x65],
UTF8=[0xe7, 0xae, 0x80, 0xe4, 0xbd, 0x93, 0xe4, 0xb8, 0xad, 0xe6, 0x96, 0x87],
},{
name="KOREA",
//크로스 플랫폼으로
//str = L"\uD06C\uB85C\uC2A4 \uD50C\uB7AB\uD3FC\uC73C\uB85C"; // KOREA 
// Little endian UTF-16/UCS-2: 6c d0 5c b8 a4 c2 20 00 0c d5 ab b7 fc d3 3c c7 5c b8 00 00
// Hex of UTF-8: ed 81 ac eb a1 9c ec 8a a4 20 ed 94 8c eb 9e ab ed 8f bc ec 9c bc eb a1 9c 00 
UTF16=[0x6c, 0xd0, 0x5c, 0xb8, 0xa4, 0xc2, 0x20, 0x00, 0x0c, 0xd5, 0xab, 0xb7, 0xfc, 0xd3, 0x3c, 0xc7, 0x5c, 0xb8],
UTF8=[0xed, 0x81, 0xac, 0xeb, 0xa1, 0x9c, 0xec, 0x8a, 0xa4, 0x20, 0xed, 0x94, 0x8c, 0xeb, 0x9e, 0xab, 0xed, 0x8f, 0xbc, 0xec, 0x9c, 0xbc, 0xeb, 0xa1, 0x9c],
},{
name="ISRAEL",
//מדורים מבוקשים
//str = L"\u05DE\u05D3\u05D5\u05E8\u05D9\u05DD \u05DE\u05D1\u05D5\u05E7\u05E9\u05D9\u05DD"; // ISRAEL 
// Little endian UTF-16/UCS-2: de 05 d3 05 d5 05 e8 05 d9 05 dd 05 20 00 de 05 d1 05 d5 05 e7 05 e9 05 d9 05 dd 05 00 00
// Hex of UTF-8: d7 9e d7 93 d7 95 d7 a8 d7 99 d7 9d 20 d7 9e d7 91 d7 95 d7 a7 d7 a9 d7 99 d7 9d 00
UTF16=[0xde, 0x05, 0xd3, 0x05, 0xd5, 0x05, 0xe8, 0x05, 0xd9, 0x05, 0xdd, 0x05, 0x20, 0x00, 0xde, 0x05, 0xd1, 0x05, 0xd5, 0x05, 0xe7, 0x05, 0xe9, 0x05, 0xd9, 0x05, 0xdd, 0x05],
UTF8=[0xd7, 0x9e, 0xd7, 0x93, 0xd7, 0x95, 0xd7, 0xa8, 0xd7, 0x99, 0xd7, 0x9d, 0x20, 0xd7, 0x9e, 0xd7, 0x91, 0xd7, 0x95, 0xd7, 0xa7, 0xd7, 0xa9, 0xd7, 0x99, 0xd7, 0x9d],
},{
name="EGYPT",
//أفضل البحوث
//str = L"\u0623\u0641\u0636\u0644 \u0627\u0644\u0628\u062D\u0648\u062B"; // EGYPT 
// Little endian UTF-16/UCS-2: 23 06 41 06 36 06 44 06 20 00 27 06 44 06 28 06 2d 06 48 06 2b 06 00 00
// Hex of UTF-8: d8 a3 d9 81 d8 b6 d9 84 20 d8 a7 d9 84 d8 a8 d8 ad d9 88 d8 ab 00 
UTF16=[0x23, 0x06, 0x41, 0x06, 0x36, 0x06, 0x44, 0x06, 0x20, 0x00, 0x27, 0x06, 0x44, 0x06, 0x28, 0x06, 0x2d, 0x06, 0x48, 0x06, 0x2b, 0x06],
UTF8=[0xd8, 0xa3, 0xd9, 0x81, 0xd8, 0xb6, 0xd9, 0x84, 0x20, 0xd8, 0xa7, 0xd9, 0x84, 0xd8, 0xa8, 0xd8, 0xad, 0xd9, 0x88, 0xd8, 0xab],
},{
name="GREECE",
//Σὲ γνωρίζω ἀπὸ
//str = L"\u03A3\u1F72 \u03B3\u03BD\u03C9\u03C1\u03AF\u03B6\u03C9 \u1F00\u03C0\u1F78"; // GREECE 
// Little endian UTF-16/UCS-2: a3 03 72 1f 20 00 b3 03 bd 03 c9 03 c1 03 af 03 b6 03 c9 03 20 00 00
// Hex of UTF-8: ce a3 e1 bd b2 20 ce b3 ce bd cf 89 cf 81 ce af ce b6 cf 89 20 e1 bc 80 cf 80 e1 bd b8 00 
UTF16=[0xa3, 0x03, 0x72, 0x1f, 0x20, 0x00, 0xb3, 0x03, 0xbd, 0x03, 0xc9, 0x03, 0xc1, 0x03, 0xaf, 0x03, 0xb6, 0x03, 0xc9, 0x03, 0x20, 0x00, 0x00, 0x1f, 0xc0, 0x03, 0x78, 0x1f],
UTF8=[0xce, 0xa3, 0xe1, 0xbd, 0xb2, 0x20, 0xce, 0xb3, 0xce, 0xbd, 0xcf, 0x89, 0xcf, 0x81, 0xce, 0xaf, 0xce, 0xb6, 0xcf, 0x89, 0x20, 0xe1, 0xbc, 0x80, 0xcf, 0x80, 0xe1, 0xbd, 0xb8],
},{
name="BULGARIA",
//Здравей, свят
//str = L"\u0417\u0434\u0440\u0430\u0432\u0435\u0439, \u0441\u0432\u044f\u0442"; // BULGARIA
// Little endian UTF-16/UCS-2: 17 04 34 04 40 04 30 04 32 04 35 04 39 04 2c 00 20 00 41 04 32 04 4f 04 42 04 00 00
// Hex of UTF-8: d0 97 d0 b4 d1 80 d0 b0 d0 b2 d0 b5 d0 b9 2c 20 d1 81 d0 b2 d1 8f d1 82 00
UTF16=[0x17, 0x04, 0x34, 0x04, 0x40, 0x04, 0x30, 0x04, 0x32, 0x04, 0x35, 0x04, 0x39, 0x04, 0x2c, 0x00, 0x20, 0x00, 0x41, 0x04, 0x32, 0x04, 0x4f, 0x04, 0x42, 0x04],
UTF8=[0xd0, 0x97, 0xd0, 0xb4, 0xd1, 0x80, 0xd0, 0xb0, 0xd0, 0xb2, 0xd0, 0xb5, 0xd0, 0xb9, 0x2c, 0x20, 0xd1, 0x81, 0xd0, 0xb2, 0xd1, 0x8f, 0xd1, 0x82],
},{
name="THAILAND",
//แผ่นดินฮั่นเสื่อมโทรมแสนสังเวช
//str = L"\u0E41\u0E1C\u0E48\u0E19\u0E14\u0E34\u0E19\u0E2E\u0E31\u0E48\u0E19\u0E40\u0E2A\u0E37\u0E48\u0E2D\u0E21\u0E42\u0E17\u0E23\u0E21\u0E41\u0E2A\u0E19\u0E2A\u0E31\u0E07\u0E40\u0E27\u0E0A"; // THAILAND
// Little endian UTF-16/UCS-2: 41 0e 1c 0e 48 0e 19 0e 14 0e 34 0e 19 0e 2e 0e 31 0e 48 0e 19 0e 40 0e 2a 0e 37 0e 48 0e 2d 0e 21 0e 42 0e 17 0e 23 0e 21 0e 41 0e 2a 0e 19 0e 2a 0e 31 0e 07 0e 40 0e 27 0e 0a 0e 00 00
// Hex of UTF-8: e0 b9 81 e0 b8 9c e0 b9 88 e0 b8 99 e0 b8 94 e0 b8 b4 e0 b8 99 e0 b8 ae e0 b8 b1 e0 b9 88 e0 b8 99 e0 b9 80 e0 b8 aa e0 b8 b7 e0 b9 88 e0 b8 ad e0 b8 a1 e0 b9 82 e0 b8 97 e0 b8 a3 e0 b8 a1 e0 b9 81 e0 b8 aa e0 b8 99 e0 b8 aa e0 b8 b1 e0 b8 87 e0 b9 80 e0 b8 a7 e0 b8 8a 00
UTF16=[0x41, 0x0e, 0x1c, 0x0e, 0x48, 0x0e, 0x19, 0x0e, 0x14, 0x0e, 0x34, 0x0e, 0x19, 0x0e, 0x2e, 0x0e, 0x31, 0x0e, 0x48, 0x0e, 0x19, 0x0e, 0x40, 0x0e, 0x2a, 0x0e, 0x37, 0x0e, 0x48, 0x0e, 0x2d, 0x0e, 0x21, 0x0e, 0x42, 0x0e, 0x17, 0x0e, 0x23, 0x0e, 0x21, 0x0e, 0x41, 0x0e, 0x2a, 0x0e, 0x19, 0x0e, 0x2a, 0x0e, 0x31, 0x0e, 0x07, 0x0e, 0x40, 0x0e, 0x27, 0x0e, 0x0a, 0x0e],
UTF8=[0xe0, 0xb9, 0x81, 0xe0, 0xb8, 0x9c, 0xe0, 0xb9, 0x88, 0xe0, 0xb8, 0x99, 0xe0, 0xb8, 0x94, 0xe0, 0xb8, 0xb4, 0xe0, 0xb8, 0x99, 0xe0, 0xb8, 0xae, 0xe0, 0xb8, 0xb1, 0xe0, 0xb9, 0x88, 0xe0, 0xb8, 0x99, 0xe0, 0xb9, 0x80, 0xe0, 0xb8, 0xaa, 0xe0, 0xb8, 0xb7, 0xe0, 0xb9, 0x88, 0xe0, 0xb8, 0xad, 0xe0, 0xb8, 0xa1, 0xe0, 0xb9, 0x82, 0xe0, 0xb8, 0x97, 0xe0, 0xb8, 0xa3, 0xe0, 0xb8, 0xa1, 0xe0, 0xb9, 0x81, 0xe0, 0xb8, 0xaa, 0xe0, 0xb8, 0x99, 0xe0, 0xb8, 0xaa, 0xe0, 0xb8, 0xb1, 0xe0, 0xb8, 0x87, 0xe0, 0xb9, 0x80, 0xe0, 0xb8, 0xa7, 0xe0, 0xb8, 0x8a],
},{
name="MATHEMATICS",
//∮ E⋅da = Q, n → ∞, ∑ f(i) = ∏ g(i)
//str = L"\u222E E\u22C5da = Q,  n \u2192 \u221E, \u2211 f(i) = \u220F g(i)"; // MATHEMATICS 
// Little endian UTF-16/UCS-2: 2e 22 20 00 45 00 c5 22 64 00 61 00 20 00 3d 00 20 00 51 00 2c 00 20 00 20 00 6e 00 20 00 92 21 20 00 1e 22 2c 00 20 00 11 22 20 00 66 00 28 00 69 00 29 00 20 00 3d 00 20 00 0f 22 20 00 67 00 28 00 69 00 29 00 00 00
// Hex of UTF-8: e2 88 ae 20 45 e2 8b 85 64 61 20 3d 20 51 2c 20 20 6e 20 e2 86 92 20 e2 88 9e 2c 20 e2 88 91 20 66 28 69 29 20 3d 20 e2 88 8f 20 67 28 69 29 00 
//UTF16=[0x2e, 0x22, 0x20, 0x00, 0x45, 0x00, 0xc5, 0x22, 0x64, 0x00, 0x61, 0x00, 0x20, 0x00, 0x3d, 0x00, 0x20, 0x00, 0x51, 0x00, 0x2c, 0x00, 0x20, 0x00, 0x20, 0x00, 0x6e, 0x00, 0x20, 0x00, 0x92, 0x21, 0x20, 0x00, 0x1e, 0x22, 0x2c, 0x00, 0x20, 0x00, 0x11, 0x22, 0x20, 0x00, 0x66, 0x00, 0x28, 0x00, 0x69, 0x00, 0x29, 0x00, 0x20, 0x00, 0x3d, 0x00, 0x20, 0x00, 0x0f, 0x22, 0x20, 0x00, 0x67, 0x00, 0x28, 0x00, 0x69, 0x00, 0x29],
UTF16=[0x2e, 0x22, 0x20, 0x00, 0x45, 0x00, 0xc5, 0x22, 0x64, 0x00, 0x61, 0x00, 0x20, 0x00, 0x3d, 0x00, 0x20, 0x00, 0x51, 0x00, 0x2c, 0x00, 0x20, 0x00, 0x6e, 0x00, 0x20, 0x00, 0x92, 0x21, 0x20, 0x00, 0x1e, 0x22, 0x2c, 0x00, 0x20, 0x00, 0x11, 0x22, 0x20, 0x00, 0x66, 0x00, 0x28, 0x00, 0x69, 0x00, 0x29, 0x00, 0x20, 0x00, 0x3d, 0x00, 0x20, 0x00, 0x0f, 0x22, 0x20, 0x00, 0x67, 0x00, 0x28, 0x00, 0x69, 0x00, 0x29, 0x00],
//UTF8=[0xe2, 0x88, 0xae, 0x20, 0x45, 0xe2, 0x8b, 0x85, 0x64, 0x61, 0x20, 0x3d, 0x20, 0x51, 0x2c, 0x20, 0x20, 0x6e, 0x20, 0xe2, 0x86, 0x92, 0x20, 0xe2, 0x88, 0x9e, 0x2c, 0x20, 0xe2, 0x88, 0x91, 0x20, 0x66, 0x28, 0x69, 0x29, 0x20, 0x3d, 0x20, 0xe2, 0x88, 0x8f, 0x20, 0x67, 0x28, 0x69, 0x29],
UTF8=[0xe2, 0x88, 0xae, 0x20, 0x45, 0xe2, 0x8b, 0x85, 0x64, 0x61, 0x20, 0x3d, 0x20, 0x51, 0x2c, 0x20, 0x6e, 0x20, 0xe2, 0x86, 0x92, 0x20, 0xe2, 0x88, 0x9e, 0x2c, 0x20, 0xe2, 0x88, 0x91, 0x20, 0x66, 0x28, 0x69, 0x29, 0x20, 0x3d, 0x20, 0xe2, 0x88, 0x8f, 0x20, 0x67, 0x28, 0x69, 0x29],
},{
name="FRANCE",
//français langue étrangère
//str = L"fran\u00E7ais langue \u00E9trang\u00E8re"; // FRANCE
// Little endian UTF-16/UCS-2: 66 00 72 00 61 00 6e 00 e7 00 61 00 69 00 73 00 20 00 6c 00 61 00 6e 00 67 00 75 00 65 00 20 00 e9 00 74 00 72 00 61 00 6e 00 67 00 e8 00 72 00 65 00 00 00
// Hex of UTF-8: 66 72 61 6e c3 a7 61 69 73 20 6c 61 6e 67 75 65 20 c3 a9 74 72 61 6e 67 c3 a8 72 65 00
UTF16=[0x66, 0x00, 0x72, 0x00, 0x61, 0x00, 0x6e, 0x00, 0xe7, 0x00, 0x61, 0x00, 0x69, 0x00, 0x73, 0x00, 0x20, 0x00, 0x6c, 0x00, 0x61, 0x00, 0x6e, 0x00, 0x67, 0x00, 0x75, 0x00, 0x65, 0x00, 0x20, 0x00, 0xe9, 0x00, 0x74, 0x00, 0x72, 0x00, 0x61, 0x00, 0x6e, 0x00, 0x67, 0x00, 0xe8, 0x00, 0x72, 0x00, 0x65, 0x00],
UTF8=[0x66, 0x72, 0x61, 0x6e, 0xc3, 0xa7, 0x61, 0x69, 0x73, 0x20, 0x6c, 0x61, 0x6e, 0x67, 0x75, 0x65, 0x20, 0xc3, 0xa9, 0x74, 0x72, 0x61, 0x6e, 0x67, 0xc3, 0xa8, 0x72, 0x65],
},{
name="SPAIN",
//mañana olé
//str = L"ma\u00F1ana ol\u00E9"; // SPAIN
// Little endian UTF-16/UCS-2: 6d 00 61 00 f1 00 61 00 6e 00 61 00 20 00 6f 00 6c 00 e9 00 00 00
// Hex of UTF-8: 6d 61 c3 b1 61 6e 61 20 6f 6c c3 a9 00
UTF16=[0x6d, 0x00, 0x61, 0x00, 0xf1, 0x00, 0x61, 0x00, 0x6e, 0x00, 0x61, 0x00, 0x20, 0x00, 0x6f, 0x00, 0x6c, 0x00, 0xe9, 0x00],
UTF8=[0x6d, 0x61, 0xc3, 0xb1, 0x61, 0x6e, 0x61, 0x20, 0x6f, 0x6c, 0xc3, 0xa9],
}
];

function mk_blob( arr)
{
	local b = blob( arr.len());
	foreach( i,v in arr)
		b[i] = v;
	return b;
}

function mk_blob_sw( arr)
{
	local b = blob( arr.len());
	foreach( i,v in arr)
		b[i^1] = v;
	return b;
}

{
	print( "\n-----------------\n\tUTF-8\n-----------------\n");
	foreach( t in TESTS)
	{
		print( "Test: " + t.name + "\n");
		local rdr = textreader( mk_blob( t.UTF8), true);
		while( !rdr.eos())
		{
			local l = rdr.readline();
			print( l);
		}
		print( "\n");
		rdr.close();
	}
}

{
	print( "\n-----------------\n\tUTF-16BE\n-----------------\n");
	foreach( t in TESTS)
	{
		print( "Test: " + t.name + "\n");
		local rdr = textreader( mk_blob_sw( t.UTF16), true, "UTF-16BE");
		while( !rdr.eos())
		{
			local l = rdr.readline();
			print( l);
		}
		print( "\n");
		rdr.close();
	}
}

{
	print( "\n-----------------\n\tUTF-16LE\n-----------------\n");
	foreach( t in TESTS)
	{
		print( "Test: " + t.name + "\n");
		local rdr = textreader( mk_blob( t.UTF16), true, "UTF-16LE");
		while( !rdr.eos())
		{
			local l = rdr.readline();
			print( l);
		}
		print( "\n");
		rdr.close();
	}
}
